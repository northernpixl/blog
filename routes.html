<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Route Map | NorthernPixl</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap');
        
        /* Critical for map rendering: ensure container has height */
        html, body, #root { height: 100%; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }
        
        /* Map container needs explicit relative positioning and z-index for stacking context */
        .leaflet-container { width: 100%; height: 100%; background: #f8fafc; z-index: 0; position: relative; }
        
        /* Custom Popup Styles */
        .leaflet-popup-content-wrapper { border-radius: 1rem; padding: 0.5rem; }
        .leaflet-popup-content { margin: 0.5rem; width: 200px !important; }
        .custom-popup .title { font-weight: 900; font-size: 1rem; line-height: 1.2; margin-bottom: 0.25rem; }
        .custom-popup .meta { font-size: 0.75rem; font-weight: 700; color: #64748b; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.5rem; }
        .custom-popup .link { display: inline-block; background: #0f172a; color: white; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 700; text-decoration: none; margin-top: 0.25rem; }
        
        .filter-btn.active { background-color: #0f172a; color: white; }
        .filter-btn { background-color: #f1f5f9; color: #64748b; }
        
        /* Animation utilities */
        .fade-in { animation: fadeIn 0.5s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3848390381001803"
     crossorigin="anonymous"></script>
    </style>
</head>
<body class="bg-white text-slate-900 overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;

        const Icon = ({ name, size = 20, className = "" }) => {
            const icons = {
                camera: <><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></>,
                arrowRight: <><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></>,
                menu: <><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></>,
                x: <><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></>
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || null}
                </svg>
            );
        };

        const WALKS = [
            // Short Walks (101-120)
            { id: 101, category: "1-4", name: "Drake Stone Walk", length: "4 miles", difficulty: "Moderate", elevation: "150m", lat: 55.337, lng: -2.105, desc: "A mystical walk up to a massive sandstone boulder believed to have healing powers.", highlights: "The massive Drake Stone boulder, Harbottle Lake nature reserve.", route: [[55.3378100, -2.1179200]] },
            { id: 102, category: "1-4", name: "Yeavering Bell", length: "3.6 miles", difficulty: "Strenuous", elevation: "361m", lat: 55.545, lng: -2.112, desc: "A short but sharp climb to the summit of an Iron Age hillfort.", highlights: "Largest Iron Age hillfort in the region, wild Cheviot goats.", route: [[55.5679200, -2.1171600]] },
            { id: 103, category: "1-4", name: "Bamburgh Castle Circular", length: "3 miles", difficulty: "Easy", elevation: "20m", lat: 55.609, lng: -1.712, desc: "A classic coastal loop. Walk along the beach with the castle towering above you.", highlights: "Bamburgh Castle from the beach, The Wynding dunes.", route: [[55.6043500, -1.6970100]] },
            { id: 104, category: "1-4", name: "Berwick Walls", length: "1.5 miles", difficulty: "Easy", elevation: "10m", lat: 55.770, lng: -2.005, desc: "A complete circuit of the Elizabethan town walls.", highlights: "Elizabethan fortifications, Royal Border Bridge.", route: [[55.7722693, -2.0040788]] },
            { id: 105, category: "1-4", name: "Bolam Lake", length: "1 mile", difficulty: "Easy", elevation: "30m", lat: 55.127, lng: -1.865, desc: "A gentle circular walk around a beautiful lake and woodland.", highlights: "Bolam Lake reflections, Red Squirrels.", route: [[55.1326000, -1.8711100]] },
            { id: 106, category: "1-4", name: "Rothbury Riverside", length: "1.5 miles", difficulty: "Easy", elevation: "15m", lat: 55.309, lng: -1.912, desc: "Follows the River Coquet. Flat, easy walking with plenty of benches.", highlights: "River Coquet stepping stones, views of Simonside.", route: [[55.3077500, -1.9117100]] },
            { id: 107, category: "1-4", name: "Thirlwall Castle", length: "1.75 miles", difficulty: "Easy", elevation: "40m", lat: 54.989, lng: -2.535, desc: "Visit the ruins of a 14th-century castle built with stones from Hadrian's Wall.", highlights: "Thirlwall Castle ruins, Tipalt Burn.", route: [[54.985011, -2.528657]] },
            { id: 108, category: "1-4", name: "Falstone Circular", length: "2.5 miles", difficulty: "Moderate", elevation: "60m", lat: 55.185, lng: -2.438, desc: "A lovely route starting in the village of Falstone, following a section of the River Tyne Trail.", highlights: "Stell stone sculpture, River North Tyne.", route: [[55.1804900, -2.4356200]] },
            { id: 109, category: "1-4", name: "Hareshaw Linn", length: "3 miles", difficulty: "Moderate", elevation: "100m", lat: 55.149, lng: -2.222, desc: "A 'there and back' walk up to a magical wooded dene to a spectacular 30ft waterfall.", highlights: "Hareshaw Linn waterfall, ancient woodland.", route: [[55.145889, -2.253043]] },
            { id: 110, category: "1-4", name: "St Cuthbert's Cave", length: "2 miles", difficulty: "Moderate", elevation: "90m", lat: 55.617, lng: -1.928, desc: "Short walk to the sandstone cave where St Cuthbert's body was said to have been hidden.", highlights: "St Cuthbert's Cave, Kyloe Hills views.", route: [[55.6096200, -1.9203700]] },
            { id: 111, category: "1-4", name: "Steel Rigg & Sycamore Gap", length: "2 miles", difficulty: "Moderate", elevation: "100m", lat: 55.0030900, lng: -2.3909400, desc: "A classic section of Hadrian's Wall with iconic views, visiting the site of the famous Sycamore Gap.", highlights: "Hadrian's Wall, Milecastle 39, Crag Lough.", route: [[55.0030900, -2.3909400]] },
            { id: 112, category: "1-4", name: "Duddo Five Stones", length: "1.5 miles", difficulty: "Easy", elevation: "40m", lat: 55.6767700, lng: -2.1093600, desc: "A short walk across fields to Northumberland's answer to Stonehenge, offering panoramic views of the Cheviots.", highlights: "Ancient Stone Circle, Cheviot Views.", route: [[55.6767700, -2.1093600]] },
            { id: 113, category: "1-4", name: "Hindhope Linn", length: "3.75 miles", difficulty: "Easy", elevation: "60m", lat: 55.295434, lng: -2.340566, desc: "A magical forest walk leading to a spectacular waterfall in a deep gorge.", highlights: "Hindhope Linn Waterfall, Red Squirrels.", route: [[55.295434, -2.340566]] },
            { id: 114, category: "1-4", name: "Corbridge Riverside", length: "2.5 miles", difficulty: "Easy", elevation: "10m", lat: 54.9714500, lng: -2.0208600, desc: "A gentle stroll along the banks of the Tyne at the historic Roman town of Corbridge.", highlights: "Roman Bridge remains, River Tyne.", route: [[54.9714500, -2.0208600]] },
            { id: 115, category: "1-4", name: "Cullernose Point", length: "2.5 miles", difficulty: "Easy", elevation: "30m", lat: 55.4711200, lng: -1.5956600, desc: "A dramatic coastal walk along the basalt cliffs south of Craster.", highlights: "Basalt cliffs, nesting seabirds, views of Dunstanburgh.", route: [[55.4711200, -1.5956600]] },
            { id: 116, category: "1-4", name: "Holystone & Lady's Well", length: "2 miles", difficulty: "Easy", elevation: "50m", lat: 55.3185200, lng: -2.0718700, desc: "A history-rich walk visiting a holy well associated with St Ninian and St Paulinus.", highlights: "Lady's Well, peaceful woodland, Coquet Valley views.", route: [[55.3185200, -2.0718700]] },
            { id: 117, category: "1-4", name: "Etal Castle & River Till", length: "2 miles", difficulty: "Easy", elevation: "20m", lat: 55.6468000, lng: -2.1201500, desc: "A picturesque loop around the village of Etal, following the banks of the River Till.", highlights: "Etal Castle ruins, thatched cottages, Heatherslaw Light Railway.", route: [[55.6468000, -2.1201500]] },
            { id: 118, category: "1-4", name: "Ros Castle", length: "2 miles", difficulty: "Moderate", elevation: "120m", lat: 55.5169300, lng: -1.8875600, desc: "A short climb to the summit of Ros Castle, an Iron Age hillfort with arguably the best coastal views in Northumberland.", highlights: "360-degree panorama, seven castles visible on a clear day.", route: [[55.5169300, -1.8875600]] },
            { id: 119, category: "1-4", name: "Blanchland & The Derwent", length: "3 miles", difficulty: "Moderate", elevation: "80m", lat: 54.8474961, lng: -2.0537738, desc: "Explore the honey-stone village of Blanchland and the surrounding moors and river.", highlights: "Blanchland Abbey, River Derwent.", route: [[54.8474961, -2.0537738]] },
            { id: 120, category: "1-4", name: "Linhope Spout", length: "3 miles", difficulty: "Moderate", elevation: "150m", lat: 55.4397500, lng: -2.0382600, desc: "A walk into the Breamish Valley to see the chute of water that is Linhope Spout.", highlights: "Linhope Spout waterfall, deep plunge pool.", route: [[55.4397500, -2.0382600]] },

            // Medium Walks (201-220) - Synchronized with walks_medium.html
            { id: 201, category: "4-7", name: "Dunstanburgh from Craster", length: "4.5 miles", difficulty: "Easy", elevation: "30m", lat: 55.472, lng: -1.593, desc: "The definitive coastal walk. From Craster harbor, along the flat grassy path to the castle, then explore the Embleton Bay beach before returning.", highlights: "Craster Harbour, Dunstanburgh Castle, Embleton Bay sandy beach.", route: [[55.4709300, -1.5957200]] },
            { id: 202, category: "4-7", name: "Allen Banks & Staward Gorge", length: "6.5 miles", difficulty: "Moderate", elevation: "190m", lat: 54.967, lng: -2.315, desc: "A stunning walk through the largest area of ancient woodland in Northumberland. Cross the suspension bridge (if open) or stepping stones, visit the Victorian summerhouse, and climb to the medieval ruins of Staward Peel for incredible gorge views.", highlights: "Ancient Woodland, Staward Peel Ruins, River Allen Gorge.", route: [[54.9704900, -2.3170200]] },
            { id: 203, category: "4-7", name: "Holy Island Loop", length: "5 miles", difficulty: "Moderate", elevation: "25m", lat: 55.671, lng: -1.796, desc: "A full circuit of Lindisfarne. Includes the Castle, the Priory, the harbor, and the remote sand dunes on the north side.", highlights: "Lindisfarne Priory, Castle, Emmanuel Head pyramid, North Shore dunes.", route: [[55.6751500, -1.8010900]] },
            { id: 204, category: "4-7", name: "Doddington Moor", length: "4.5 miles", difficulty: "Moderate", elevation: "180m", lat: 55.578, lng: -2.005, desc: "Explore ancient cup and ring marked rocks and a mysterious stone circle. High moorland with sweeping views.", highlights: "Ancient Rock Art, Doddington Stone Circle, panoramic Cheviot views.", route: [[55.5852000, -2.0029100]] },
            { id: 205, category: "4-7", name: "Norham Castle", length: "4 miles", difficulty: "Easy", elevation: "40m", lat: 55.721, lng: -2.158, desc: "A riverside walk along the Tweed, looping back through the village of Norham dominated by its massive ruined keep.", highlights: "Norham Castle keep, River Tweed banks, Ladykirk Bridge.", route: [[55.7192373, -2.1622550]] },
            { id: 206, category: "4-7", name: "Greenlee Lough", length: "4.5 miles", difficulty: "Moderate", elevation: "110m", lat: 55.025, lng: -2.368, desc: "A boardwalk section over the wetlands of the lough, followed by a climb up to Hadrian's Wall for the return leg.", highlights: "Greenlee Lough boardwalk, Hadrian's Wall views, Birdwatching.", route: [[55.0148600, -2.3945300]] },
            { id: 207, category: "4-7", name: "Hethas Hike", length: "4.5 miles", difficulty: "Strenuous", elevation: "250m", lat: 55.535, lng: -2.165, desc: "Deep in the College Valley. A challenging walk visiting the Hethas scenic area and elusive wild goats.", highlights: "College Valley isolation, Wild Goats, Elsdon Burn.", route: [[55.5461600, -2.1698900]] },
            { id: 208, category: "4-7", name: "Simonside Hills", length: "4.5 miles", difficulty: "Strenuous", elevation: "300m", lat: 55.289, lng: -1.948, desc: "A sandstone ridge offering 360-degree views. Steep stone steps lead to the summit cairn.", highlights: "Summit Cairn views, Heather moorland, 'Little Church' rock formation.", route: [[55.2832700, -1.9189300]] },
            { id: 209, category: "4-7", name: "Walltown Crags", length: "5 miles", difficulty: "Moderate", elevation: "150m", lat: 54.992, lng: -2.525, desc: "Some of the most dramatic sections of Hadrian's Wall. The route follows the roller-coaster crags.", highlights: "Walltown Crags, Roman Wall turrets, Thirlwall Castle.", route: [[54.9921600, -2.5014300]] },
            { id: 210, category: "4-7", name: "Wallington Estate", length: "4.5 miles", difficulty: "Easy", elevation: "50m", lat: 55.152, lng: -1.955, desc: "A long circular route inside and around the boundary of the National Trust estate. Woods, farmland, and riverside paths. Please note you need to be a National Trust member or pay on arrival for this route", highlights: "Wallington Hall grounds, River Wansbeck, Walled Garden.", route: [[55.1542400, -1.9598900]] },
            { id: 211, category: "4-7", name: "Thrunton Woods and Long Crag", length: "4.5 miles", difficulty: "Moderate", elevation: "200m", lat: 55.378, lng: -1.916, desc: "A woodland walk leading up to dramatic sandstone crags with sweeping views over the Cheviots.", highlights: "Thrunton Crags, Long Crag, mature pine forest.", route: [[55.3597200, -1.8575900]] },
            { id: 212, category: "4-7", name: "Bamburgh & Budle Bay", length: "6.5 miles", difficulty: "Easy", elevation: "40m", lat: 55.609, lng: -1.717, desc: "A loop combining the iconic castle, sandy beaches, and the bird-rich mudflats of Budle Bay.", highlights: "Bamburgh Castle, Budle Bay nature reserve.", route: [[55.6036400, -1.6972400]] },
            { id: 213, category: "4-7", name: "Kielder Bull Crag", length: "6.5 miles", difficulty: "Moderate", elevation: "120m", lat: 55.176, lng: -2.583, desc: "A peninsula walk extending into Kielder Water, offering diverse forest trails and water views.", highlights: "Kielder Water views, Bull Crag, red squirrels.", route: [[55.1839500, -2.5356800]] },
            { id: 214, category: "4-7", name: "Vindolanda & Barcombe", length: "4.5 miles", difficulty: "Moderate", elevation: "150m", lat: 54.991, lng: -2.360, desc: "Visit the famous Roman fort and climb Barcombe Hill for a bird's eye view of the frontier.", highlights: "Vindolanda Fort, Barcombe Hill, Thorngrafton Common.", route: [[54.9915600, -2.3656000]] },
            { id: 215, category: "4-7", name: "Alwinton Borderlands", length: "6.5 miles", difficulty: "Moderate", elevation: "180m", lat: 55.349, lng: -2.126, desc: "A circular route in the remote Upper Coquet Valley, starting in the tiny hamlet of Alwinton.", highlights: "River Coquet, Clennell Street ancient drove road.", route: [[55.3506700, -2.1287200]] },
            { id: 216, category: "4-7", name: "Warkworth River", length: "4.5 miles", difficulty: "Easy", elevation: "30m", lat: 55.350, lng: -1.600, desc: "Follow the meanders of the River Coquet around the medieval castle and visit the hermitage.", highlights: "Warkworth Castle, Hermitage, River Coquet.", route: [[55.3506900, -1.6004800]] },
            { id: 217, category: "4-7", name: "Wooler & Humbleton Hill", length: "6 miles", difficulty: "Strenuous", elevation: "280m", lat: 55.539, lng: -2.038, desc: "Climb the Iron Age hillfort of Humbleton Hill for commanding views over the Glendale valley.", highlights: "Humbleton Hillfort, Wooler Common.", route: [[55.5391400, -2.0384300]] },
            { id: 218, category: "4-7", name: "Hulne Park and Brizlee Tower", length: "4.5 miles", difficulty: "Easy", elevation: "100m", lat: 55.417, lng: -1.709, desc: "The Duke of Northumberland's private parkland. Open to the public (check times), featuring gothic ruins.", highlights: "Hulne Abbey, Brizlee Tower, deer park.", route: [[55.4175700, -1.7099400]] },
            { id: 219, category: "4-7", name: "Blawearie & Bewick Moor", length: "4.5 miles", difficulty: "Moderate", elevation: "220m", lat: 55.486, lng: -1.895, desc: "A mysterious walk on the moors visiting a ruined shepherd's cottage and Bronze Age cairns.", highlights: "Blawearie ruins, Cateran Hole, prehistoric rock art.", route: [[55.4868800, -1.8953700]] },
            { id: 220, category: "4-7", name: "Lambley Viaduct", length: "5 miles", difficulty: "Easy", elevation: "80m", lat: 54.929, lng: -2.501, desc: "Walk along the South Tyne Trail crossing the impressive Victorian viaduct with views of the Pennines.", highlights: "Lambley Viaduct, River South Tyne, Featherstone Castle.", route: [[54.9297916, -2.5017711]] },

            // Long Walks (301-320) - Synchronized with longtest.html
            { id: 301, category: "7+", name: "The Cheviot and Hedgehope", length: "11 miles", difficulty: "Very Strenuous", elevation: "911m", lat: 55.4964600, lng: -2.0744500, desc: "The big two. A serious undertaking to two of the highest points in Northumberland. Boggy peat hags on top. Navigation skills essential in bad weather. Comb Fell can be extremely boggy so take care", highlights: "The Cheviot Summit (815m), Scald Hill, Harthope Valley.", route: [[55.4964600, -2.0744500]] },
            { id: 302, category: "7+", name: "Windy Gyle", length: "7.5 miles", difficulty: "Strenuous", elevation: "619m", lat: 55.3967500, lng: -2.2231400, desc: "Start at the foot of Barrow Law just up from Barrowburn. A steady climb up The Street to the border ridge. The summit cairn is massive and offers amazing views into Scotland. One of my favourite routes!", highlights: "Russell's Cairn, The Border Ridge, Views into Scotland.", route: [[55.3967500, -2.2231400]] },
            { id: 303, category: "7+", name: "Beadnell to Low Newton", length: "8.5 miles", difficulty: "Moderate", elevation: "20m", lat: 55.5524400, lng: -1.6292200, desc: "A long coastal walk along sandy bays. Visit the Ship Inn at Low Newton for lunch before heading back. Check tide times too if planning on walking on the beach.", highlights: "Beadnell Bay, Football Hole beach, Ship Inn pub.", route: [[55.5524400, -1.6292200]] },
            { id: 304, category: "7+", name: "Steel Rigg to Housesteads", length: "7.5 miles", difficulty: "Strenuous", elevation: "350m", lat: 55.0031000, lng: -2.3909000, desc: "The classic Hadrian's Wall section. Includes Sycamore Gap site and the steepest crags. Return north of the wall for impressive views.", highlights: "Sycamore Gap site, Crag Lough, Highshield Crags.", route: [[55.0031000, -2.3909000]] },
            { id: 305, category: "7+", name: "Alnmouth to Warkworth", length: "11.5 miles", difficulty: "Moderate", elevation: "80m", lat: 55.3891400, lng: -1.6063900, desc: "Walk from Alnmouth beach to the historic village of Warkworth and its castle, following the river and coast.", highlights: "Alnmouth Estuary, Warkworth Castle, Coastal Path.", route: [[55.3891400, -1.6063900]] },
            { id: 306, category: "7+", name: "Brough Law Hillforts", length: "10 miles", difficulty: "Strenuous", elevation: "300m", lat: 55.4410000, lng: -1.9891500, desc: "Ingram Valley. Explores Iron Age settlements and Linhope Spout waterfall. High grassy ridges with expansive views with a return walking through Ingram Valley.", highlights: "Brough Law Hillfort, Linhope Spout, Ingram Valley.", route: [[55.4410000, -1.9891500]] },
            { id: 307, category: "7+", name: "Cold Law", length: "7.5 miles", difficulty: "Strenuous", elevation: "450m", lat: 55.5191500, lng: -2.0373400, desc: "A wild walk into the dramatic Cheviots. Often deserted.", highlights: "Cold Law summit, Remote wilderness, Amazing views.", route: [[55.5191500, -2.0373400]] },
            { id: 308, category: "7+", name: "Hedgehope Hill", length: "7.5 miles", difficulty: "Strenuous", elevation: "714m", lat: 55.4975200, lng: -2.0715100, desc: "The second highest peak. Steeper and more conical than the Cheviot. Best views in the park by far.", highlights: "Hedgehope Hill summit, Langlee Crags, Housey Crags.", route: [[55.4975200, -2.0715100]] },
            { id: 309, category: "7+", name: "Pilgrim's Way - Holy Island", length: "8 miles", difficulty: "Moderate", elevation: "100m", lat: 55.67740, lng: -1.89542, desc: "Holy Island across the pilgrim's causeway over the mud flats. Follow the posts that guide you to Holy Island. Please check tides! You must walk barefoot across the mud.", highlights: "Pilgrim's Causeway, Holy Island mudflats.", route: [[55.67740, -1.89542]] },
            { id: 310, category: "7+", name: "The Schil", length: "12 miles", difficulty: "Very Strenuous", elevation: "601m", lat: 55.4966821, lng: -2.1890438, desc: "A distinctive rocky peak on the Scottish border. Start at the Mounthooly, a permit will need to be booked in advance via the College Valley website. A real lung-buster.", highlights: "The Schil summit, Border Ridge, College Valley.", route: [[55.4966821, -2.1890438]] },
            { id: 311, category: "7+", name: "Craster & Howick Coast", length: "9 miles", difficulty: "Moderate", elevation: "50m", lat: 55.4717300, lng: -1.5960800, desc: "A beautiful coastal walk heading south from Craster past Cullernose Point to the Bathing House at Howick, reaching Boulmer before heading back.", highlights: "Cullernose Point, Howick Hall coastline, Rumbling Kern.", route: [[55.4717300, -1.5960800]] },
            { id: 312, category: "7+", name: "Ingram & Cochrane Pike", length: "8 miles", difficulty: "Strenuous", elevation: "350m", lat: 55.4412600, lng: -1.9739500, desc: "A tough climb in the Breamish Valley, taking in the summit of Cochrane Pike and the prehistoric landscapes of Ingram.", highlights: "Cochrane Pike, Iron Age hillforts, Breamish Valley views.", route: [[55.4412600, -1.9739500]] },
            { id: 313, category: "7+", name: "Sycamore Gap & Vindolanda", length: "8.5 miles", difficulty: "Strenuous", elevation: "300m", lat: 54.9919000, lng: -2.3545900, desc: "Extends the classic wall walk to drop down to the Roman fort of Vindolanda before climbing back up to the crags.", highlights: "Vindolanda Fort, Sycamore Gap site, Crag Lough.", route: [[54.9919000, -2.3545900]] },
            { id: 314, category: "7+", name: "Yeavering Bell & Newton Tors", length: "8 miles", difficulty: "Strenuous", elevation: "500m", lat: 55.5609800, lng: -2.0693000, desc: "A challenging twin-peak walk. Climb the hillfort of Yeavering Bell then cross the glen to the dramatic Newton Tors.", highlights: "Yeavering Bell hillfort, Newton Tors, College Valley views.", route: [[55.5609800, -2.0693000]] },
            { id: 315, category: "7+", name: "Kielder North Shore Walk", length: "9 miles", difficulty: "Moderate", elevation: "120m", lat: 55.1876200, lng: -2.4617500, desc: "A long forest track walk following the northern shoreline of the massive reservoir. Remote and peaceful.", highlights: "Kielder Water, Osprey platforms, Forest sculpture trail.", route: [[55.1876200, -2.4617500]] },
            { id: 316, category: "7+", name: "The Drake Stone & Harbottle", length: "9 miles", difficulty: "Moderate", elevation: "250m", lat: 55.3368800, lng: -2.1121900, desc: "Starts with the Drake Stone but continues high onto the moors of the military ranges before descending.", highlights: "Drake Stone, Harbottle Lake, expansive moorland.", route: [[55.3368800, -2.1121900]] },
            { id: 317, category: "7+", name: "Berwick Coastal Walk", length: "8 miles", difficulty: "Easy", elevation: "60m", lat: 55.7757100, lng: -1.9975600, desc: "Heading north from Berwick along the cliffs towards the Scottish border at Marshall Meadows, returning via the same route.", highlights: "Dramatic cliffs, Scottish Border, Berwick Walls.", route: [[55.7757100, -1.9975600]] },
            { id: 318, category: "7+", name: "Simonside & Tosson Hill", length: "7.5 miles", difficulty: "Strenuous", elevation: "440m", lat: 55.2833300, lng: -1.9188100, desc: "Extends the Simonside ridge walk to include the highest point, Tosson Hill. Rough terrain but incredible views.", highlights: "Tosson Hill summit, Ravensheugh Crags, Simonside ridge.", route: [[55.2833300, -1.9188100]] },
            { id: 319, category: "7+", name: "Warkworth to Amble Loop", length: "8.5 miles", difficulty: "Easy", elevation: "30m", lat: 55.3505000, lng: -1.6002400, desc: "Follows the river Coquet to the harbour town of Amble, exploring the marina and pier before returning.", highlights: "Warkworth Castle, Amble Harbour, Coquet Island views.", route: [[55.3505000, -1.6002400]] },
            { id: 320, category: "7+", name: "Haltwhistle & The Wall", length: "7.5 miles", difficulty: "Moderate", elevation: "200m", lat: 54.9698000, lng: -2.4616300, desc: "Starts in Haltwhistle, follows the Haltwhistle Burn up to the Wall at Cawfields, walks the crags.", highlights: "Haltwhistle Burn, Cawfields Quarry, Milecastle 42.", route: [[54.9698000, -2.4616300]] }
        ];

        const NavBar = () => {
            const [isOpen, setIsOpen] = useState(false);

            const toggleMenu = () => {
                setIsOpen(!isOpen);
            };

            const links = [
                { name: 'Home', url: 'index.html', active: false },
                { name: 'Learn', url: 'learn.html', active: false },
                { name: 'Explore', url: 'explore.html', active: false },
                { name: 'Routes', url: 'routes.html', active: true },
                { name: 'Ethics', url: 'ethics.html', active: false },
                { name: 'Tuition', url: 'tuition.html', active: false }
            ];

            return (
                <nav className="fixed top-0 w-full z-50 bg-white/90 backdrop-blur-md border-b border-slate-100">
                    <div className="flex items-center justify-between px-4 md:px-8 h-20 max-w-7xl mx-auto w-full">
                        {/* Logo Area */}
                        <div className="flex items-center space-x-3 cursor-pointer" onClick={() => window.location.href='index.html'}>
                            <div className="w-10 h-10 bg-slate-900 rounded-xl flex items-center justify-center">
                                <Icon name="camera" className="text-white" size={18} />
                            </div>
                            <span className="font-black text-lg md:text-xl tracking-tighter uppercase hidden md:inline">NorthernPixl</span>
                            <span className="font-black text-lg md:text-xl tracking-tighter uppercase md:hidden">NorthernPixl</span>
                        </div>
                        
                        {/* Desktop Navigation */}
                        <div className="hidden md:flex space-x-10 text-[11px] font-black uppercase tracking-widest text-slate-400">
                            {links.map((link) => (
                                <a 
                                    key={link.name} 
                                    href={link.url} 
                                    className={link.active ? "text-black border-b-2 border-black" : "hover:text-black"}
                                >
                                    {link.name}
                                </a>
                            ))}
                        </div>

                        {/* Mobile Menu Button */}
                        <div className="md:hidden">
                            <button onClick={toggleMenu} className="p-2 text-slate-900 focus:outline-none">
                                <Icon name={isOpen ? "x" : "menu"} size={24} />
                            </button>
                        </div>
                    </div>

                    {/* Mobile Navigation Dropdown */}
                    {isOpen && (
                        <div className="md:hidden bg-white border-b border-slate-100 absolute w-full left-0 top-20 shadow-xl fade-in">
                            <div className="flex flex-col p-6 space-y-6">
                                {links.map((link) => (
                                    <a 
                                        key={link.name} 
                                        href={link.url} 
                                        className={`text-sm font-black uppercase tracking-widest ${link.active ? "text-slate-900" : "text-slate-400"}`}
                                    >
                                        {link.name}
                                    </a>
                                ))}
                            </div>
                        </div>
                    )}
                </nav>
            );
        };

        const App = () => {
            const mapContainerRef = useRef(null);
            const mapInstanceRef = useRef(null);
            const markersLayerRef = useRef(null);
            const [activeFilter, setActiveFilter] = useState('all');

            const filteredWalks = useMemo(() => {
                if (activeFilter === 'all') return WALKS;
                if (activeFilter === '1-4') return WALKS.filter(w => w.category === '1-4');
                if (activeFilter === '4-7') return WALKS.filter(w => w.category === '4-7');
                if (activeFilter === '7+') return WALKS.filter(w => w.category === '7+');
                return WALKS;
            }, [activeFilter]);

            useEffect(() => {
                if (mapContainerRef.current && !mapInstanceRef.current) {
                    const map = L.map(mapContainerRef.current, { 
                        zoomControl: false,
                        center: [55.35, -2.0], // Center roughly on Northumberland
                        zoom: 9 
                    });
                    
                    L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                        attribution: '&copy; OpenStreetMap'
                    }).addTo(map);

                    mapInstanceRef.current = map;
                    markersLayerRef.current = L.layerGroup().addTo(map);

                    // Fix for map loading correctly
                    setTimeout(() => {
                        map.invalidateSize();
                    }, 100);
                }
            }, []);

            useEffect(() => {
                if (!mapInstanceRef.current || !markersLayerRef.current) return;

                // Clear existing markers
                markersLayerRef.current.clearLayers();

                // Add filtered markers
                filteredWalks.forEach(walk => {
                    const color = walk.category === '1-4' ? '#22c55e' : // Green
                                  walk.category === '4-7' ? '#f59e0b' : // Orange
                                  '#ef4444'; // Red
                    
                    if (walk.route && walk.route.length > 0) {
                        const startPoint = walk.route[0];
                        const marker = L.circleMarker(startPoint, {
                            radius: 6,
                            fillColor: color,
                            color: "#fff",
                            weight: 2,
                            fillOpacity: 1
                        });

                        // Link logic with Deep Linking ID
                        const baseUrl = walk.category === '1-4' ? 'walks_short.html' :
                                        walk.category === '4-7' ? 'walks_medium.html' :
                                        'walks_long.html';
                        const linkUrl = `${baseUrl}?id=${walk.id}`;

                        const popupContent = `
                            <div class="custom-popup">
                                <div class="meta">${walk.length} â€¢ ${walk.difficulty}</div>
                                <div class="title">${walk.name}</div>
                                <a href="${linkUrl}" class="link">View Details</a>
                            </div>
                        `;
                        marker.bindPopup(popupContent);
                        marker.addTo(markersLayerRef.current);
                    }
                });

            }, [filteredWalks]);

            return (
                <div className="h-full flex flex-col">
                    <NavBar />
                    
                    <main className="flex-1 pt-20 relative">
                        <div ref={mapContainerRef} className="w-full h-full" />
                        
                        {/* Legend Overlay & Filter */}
                        <div className="absolute bottom-4 left-4 md:bottom-8 md:left-8 z-[400] flex flex-col gap-2 md:gap-4">
                            
                            {/* Filter Controls */}
                            <div className="bg-white p-2 rounded-2xl shadow-xl border border-slate-100 flex gap-2">
                                <button onClick={() => setActiveFilter('all')} className={`filter-btn px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-colors ${activeFilter === 'all' ? 'active' : 'hover:bg-slate-200'}`}>All</button>
                                <button onClick={() => setActiveFilter('1-4')} className={`filter-btn px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-colors ${activeFilter === '1-4' ? 'active' : 'hover:bg-slate-200'}`}>Short</button>
                                <button onClick={() => setActiveFilter('4-7')} className={`filter-btn px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-colors ${activeFilter === '4-7' ? 'active' : 'hover:bg-slate-200'}`}>Med</button>
                                <button onClick={() => setActiveFilter('7+')} className={`filter-btn px-3 py-1.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-colors ${activeFilter === '7+' ? 'active' : 'hover:bg-slate-200'}`}>Long</button>
                            </div>

                            {/* New Group Link Button */}
                            {activeFilter !== 'all' && (
                                <a 
                                    href={
                                        activeFilter === '1-4' ? 'walks_short.html' :
                                        activeFilter === '4-7' ? 'walks_medium.html' :
                                        'walks_long.html'
                                    }
                                    className="bg-slate-900 text-white px-4 py-3 rounded-2xl shadow-xl border border-slate-900 flex items-center justify-between group hover:bg-slate-800 transition-all no-underline"
                                >
                                    <span className="font-bold text-xs uppercase tracking-widest mr-3">
                                        View {activeFilter === '1-4' ? 'Short' : activeFilter === '4-7' ? 'Medium' : 'Long'} Walks
                                    </span>
                                    <Icon name="arrowRight" size={16} />
                                </a>
                            )}

                            <div className="bg-white p-4 rounded-2xl shadow-xl border border-slate-100">
                                <h3 className="font-black text-xs uppercase tracking-widest mb-3">Route Key</h3>
                                <div className="space-y-2">
                                    <div className="flex items-center">
                                        <span className="w-3 h-3 rounded-full bg-green-500 mr-2"></span>
                                        <span className="text-xs font-bold text-slate-600">1-4 Miles</span>
                                    </div>
                                    <div className="flex items-center">
                                        <span className="w-3 h-3 rounded-full bg-amber-500 mr-2"></span>
                                        <span className="text-xs font-bold text-slate-600">4-7 Miles</span>
                                    </div>
                                    <div className="flex items-center">
                                        <span className="w-3 h-3 rounded-full bg-red-500 mr-2"></span>
                                        <span className="text-xs font-bold text-slate-600">7+ Miles</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    <script data-goatcounter="https://northernpixl.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</body>
</html>
