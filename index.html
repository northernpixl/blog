<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NorthernPixl | Northumberland Photography & Hiking Guide</title>
    
    <!-- Scripts & Styles -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap');
        body { 
            font-family: 'Inter', sans-serif; 
            -webkit-font-smoothing: antialiased; 
            overflow-x: hidden;
        }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #e2e8f0; border-radius: 10px; }
        .animate-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Map specific fixes */
        .leaflet-container { 
            width: 100%; 
            height: 100%; 
            background: #f8fafc; 
            z-index: 0; 
        }
        
        /* Ensure navigation doesn't hide behind Safari bars on mobile */
        .min-h-screen-ios {
            min-height: -webkit-fill-available;
        }
    </style>
</head>
<body class="bg-white text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Custom Icon Component
        const Icon = ({ name, size = 20, className = "" }) => {
            const icons = {
                camera: <><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></>,
                mapPin: <><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></>,
                x: <><path d="M18 6 6 18"/><path d="m6 6 12 12"/></>,
                book: <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"/>,
                arrowLeft: <><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></>,
                menu: <><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></>,
            };
            return (
                <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                    {icons[name] || null}
                </svg>
            );
        };

        const LOCATIONS = [
            { id: 1, name: "Bamburgh Castle", type: "Landscape", lat: 55.6090, lng: -1.7120, desc: "Mirror pools at Black Rocks. Use 16-24mm lens.", parking: "NE69 7DF", best_time: "Sunrise", history: "1,400 years of history." },
            { id: 2, name: "Dunstanburgh Castle", type: "Landscape", lat: 55.4915, lng: -1.5947, desc: "Approach from Craster. Smooth water with ND filters.", parking: "NE66 3TW", best_time: "Sunrise", history: "Built in 1313." },
            { id: 4, name: "Lindisfarne Castle", type: "Landscape", lat: 55.6694, lng: -1.7856, desc: "Check tide tables. Use boats as leading lines.", parking: "TD15 2RX", best_time: "Golden Hour", history: "Holy Island site." },
            { id: 5, name: "St Mary's Island", lat: 55.0717, lng: -1.4496, type: "Landscape", desc: "Tidal causeway shots at high tide.", parking: "NE26 4RS", best_time: "High Tide", history: "1898 Lighthouse." },
            { id: 6, name: "Farne Islands", type: "Wildlife", lat: 55.6178, lng: -1.6314, desc: "Landing site for puffins. 300mm+ lens recommended.", parking: "Seahouses", best_time: "May-July", history: "St Cuthbert's hermitage." },
            { id: 11, name: "Kielder Observatory", type: "Astro", lat: 55.2369, lng: -2.6105, desc: "Gold Tier Dark Sky. Red light torches only.", parking: "NE48 1EJ", best_time: "New Moon", history: "Dark sky beacon." }
        ];

        const GUIDES = [
            { id: 1, title: "Hyperfocal Distance", cat: "Landscape", time: "15 min", impact: "Maximizing sharpness from foreground to infinity." },
            { id: 2, title: "Long Exposure", cat: "Landscape", time: "12 min", impact: "Smoothing water and clouds for an ethereal look." },
            { id: 7, title: "Shutter Priority", cat: "Wildlife", time: "14 min", impact: "Freezing fast-moving birds and animals." },
            { id: 14, title: "The 500 Rule", cat: "Astro", time: "11 min", impact: "Avoiding star trails for pin-sharp night skies." }
        ];

        const WALKS = [
            { id: 101, category: "1-3", name: "Drake Stone Walk", length: "4 miles", difficulty: "Moderate", elevation: "150m", parking: "NE65 7DF", lat: 55.337, lng: -2.105, desc: "Mystical boulder walk.", route: [[55.337, -2.105], [55.340, -2.110], [55.342, -2.115], [55.337, -2.105]] },
            { id: 201, category: "4-6", name: "Dunstanburgh Craster", length: "4 miles", difficulty: "Easy", elevation: "30m", parking: "NE66 3TW", lat: 55.472, lng: -1.593, desc: "Iconic coastal path.", route: [[55.472, -1.593], [55.480, -1.595], [55.492, -1.600], [55.472, -1.593]] },
            { id: 301, category: "7+", name: "The Cheviot", length: "9 miles", difficulty: "Very Strenuous", elevation: "815m", parking: "NE71 6RJ", lat: 55.485, lng: -2.135, desc: "Highest peak climb.", route: [[55.485, -2.135], [55.495, -2.140], [55.500, -2.150], [55.485, -2.135]] }
        ];

        const App = () => {
            const [activeTab, setActiveTab] = useState('home');
            const [selectedLoc, setSelectedLoc] = useState(null);
            const [selectedTopic, setSelectedTopic] = useState(null);
            const [walkFilter, setWalkFilter] = useState('1-3');
            const [selectedWalk, setSelectedWalk] = useState(null);
            const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

            const mapContainerRef = useRef(null);
            const mapInstanceRef = useRef(null);
            const walkMapContainerRef = useRef(null);
            const walkMapInstanceRef = useRef(null);

            // Cleanup & Map Refresh Utility
            const invalidateMaps = () => {
                if (mapInstanceRef.current) mapInstanceRef.current.invalidateSize();
                if (walkMapInstanceRef.current) walkMapInstanceRef.current.invalidateSize();
            };

            // Main Map Effect
            useEffect(() => {
                if (activeTab === 'locations') {
                    if (!mapInstanceRef.current && mapContainerRef.current) {
                        const map = L.map(mapContainerRef.current, { zoomControl: false }).setView([55.35, -1.8], 9);
                        mapInstanceRef.current = map;
                        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png').addTo(map);
                        LOCATIONS.forEach(loc => {
                            const marker = L.circleMarker([loc.lat, loc.lng], { radius: 8, fillColor: '#0ea5e9', color: "#fff", weight: 3, fillOpacity: 1 }).addTo(map);
                            marker.on('click', () => setSelectedLoc(loc));
                        });
                    }
                    setTimeout(invalidateMaps, 200);
                }
            }, [activeTab]);

            // Walk Map Effect
            useEffect(() => {
                if (activeTab === 'routes' && selectedWalk) {
                    if (walkMapInstanceRef.current) {
                        walkMapInstanceRef.current.remove();
                        walkMapInstanceRef.current = null;
                    }
                    setTimeout(() => {
                        if (walkMapContainerRef.current) {
                            const map = L.map(walkMapContainerRef.current, { zoomControl: false });
                            walkMapInstanceRef.current = map;
                            L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png').addTo(map);
                            const polyline = L.polyline(selectedWalk.route, {color: '#ef4444', weight: 4}).addTo(map);
                            map.fitBounds(polyline.getBounds(), { padding: [30, 30] });
                        }
                    }, 200);
                }
            }, [activeTab, selectedWalk]);

            useEffect(() => {
                setMobileMenuOpen(false);
                window.scrollTo(0,0);
            }, [activeTab]);

            return (
                <div className="min-h-screen flex flex-col">
                    {/* Navigation */}
                    <nav className="fixed top-0 w-full z-[100] bg-white/95 backdrop-blur-md border-b border-slate-100">
                        <div className="max-w-7xl mx-auto px-4 md:px-8 h-16 md:h-20 flex items-center justify-between">
                            <div className="flex items-center space-x-3 cursor-pointer" onClick={() => setActiveTab('home')}>
                                <div className="w-8 h-8 md:w-10 md:h-10 bg-slate-900 rounded-xl flex items-center justify-center">
                                    <Icon name="camera" className="text-white" size={16} />
                                </div>
                                <span className="font-black text-lg md:text-xl tracking-tighter uppercase">NorthernPixl</span>
                            </div>

                            {/* Desktop Nav */}
                            <div className="hidden md:flex space-x-10 text-[11px] font-black uppercase tracking-widest text-slate-400">
                                {['learn', 'locations', 'routes'].map(t => (
                                    <button key={t} onClick={() => setActiveTab(t)} className={`hover:text-black transition-colors ${activeTab === t ? 'text-black' : ''}`}>{t}</button>
                                ))}
                            </div>

                            {/* Mobile Nav Toggle */}
                            <button className="md:hidden p-2" onClick={() => setMobileMenuOpen(!mobileMenuOpen)}>
                                <Icon name={mobileMenuOpen ? "x" : "menu"} size={24} />
                            </button>
                        </div>

                        {/* Mobile Menu */}
                        {mobileMenuOpen && (
                            <div className="md:hidden bg-white border-b border-slate-100 flex flex-col py-4 px-6 space-y-4 animate-in">
                                {['learn', 'locations', 'routes'].map(t => (
                                    <button key={t} onClick={() => setActiveTab(t)} className={`text-left font-black uppercase tracking-widest text-xs py-2 ${activeTab === t ? 'text-sky-500' : 'text-slate-500'}`}>{t}</button>
                                ))}
                            </div>
                        )}
                    </nav>

                    <main className="flex-grow pt-16 md:pt-20">
                        {/* Home Tab */}
                        {activeTab === 'home' && (
                            <section className="min-h-[calc(100vh-80px)] flex flex-col items-center justify-center text-center px-6 bg-slate-900 text-white py-20">
                                <h1 className="text-5xl md:text-8xl lg:text-9xl font-black tracking-tighter mb-6 leading-none">
                                    NORTHUMBERLAND <br/>
                                    <span className="text-sky-500">EXPOSURE.</span>
                                </h1>
                                <p className="text-base md:text-xl text-slate-400 max-w-2xl mb-10 px-4">
                                    A beginner's guide for Northumberland photographers & hikers. Tips, maps, and trails for your journey.
                                </p>
                                <div className="flex flex-col md:flex-row gap-4 w-full max-w-sm md:max-w-none justify-center">
                                    <button onClick={() => setActiveTab('learn')} className="bg-white text-black px-8 py-4 rounded-full font-black uppercase text-xs tracking-widest hover:bg-slate-200 transition-colors">Start Learning</button>
                                    <button onClick={() => setActiveTab('locations')} className="bg-slate-800 text-white border border-white/10 px-8 py-4 rounded-full font-black uppercase text-xs tracking-widest hover:bg-slate-700 transition-colors">Explore Map</button>
                                    <button onClick={() => setActiveTab('routes')} className="bg-sky-500 text-white px-8 py-4 rounded-full font-black uppercase text-xs tracking-widest hover:bg-sky-600 transition-colors">Hiking Routes</button>
                                </div>
                            </section>
                        )}

                        {/* Locations Tab */}
                        {activeTab === 'locations' && (
                            <section className="max-w-7xl mx-auto px-4 md:px-8 py-10 md:py-20 flex flex-col">
                                <div className="grid lg:grid-cols-12 gap-8 md:gap-12 h-auto lg:h-[700px]">
                                    {/* Map Side */}
                                    <div className="lg:col-span-7 h-[300px] md:h-[500px] lg:h-full rounded-[2rem] md:rounded-[3rem] overflow-hidden border border-slate-100 shadow-xl relative order-1">
                                        <div ref={mapContainerRef} className="w-full h-full"></div>
                                    </div>
                                    
                                    {/* Info Side */}
                                    <div className="lg:col-span-5 bg-white rounded-[2rem] md:rounded-[3rem] p-6 md:p-10 border border-slate-100 flex flex-col h-auto lg:h-full overflow-y-auto custom-scrollbar shadow-lg order-2">
                                        {selectedLoc ? (
                                            <div className="animate-in space-y-6">
                                                <button onClick={() => setSelectedLoc(null)} className="flex items-center text-slate-400 hover:text-black font-bold text-xs uppercase tracking-widest mb-2">
                                                    <Icon name="arrowLeft" size={14} className="mr-2" /> Back to Full Map
                                                </button>
                                                <div className="inline-block bg-sky-500 text-white px-3 py-1 rounded-md text-[10px] font-black uppercase tracking-widest">{selectedLoc.type}</div>
                                                <h3 className="text-3xl md:text-4xl font-black">{selectedLoc.name}</h3>
                                                <p className="text-sm md:text-base text-slate-500">{selectedLoc.desc}</p>
                                                <div className="bg-slate-50 p-5 rounded-2xl border border-slate-100 space-y-2">
                                                    <p className="text-[10px] font-black uppercase text-slate-400">Logistics</p>
                                                    <p className="text-sm font-bold">PARKING: {selectedLoc.parking}</p>
                                                    <p className="text-sm font-bold text-sky-600 uppercase tracking-wide">BEST TIME: {selectedLoc.best_time}</p>
                                                </div>
                                            </div>
                                        ) : (
                                            <div className="flex flex-col items-center justify-center py-10 lg:h-full text-slate-300 text-center">
                                                <Icon name="mapPin" size={48} className="mb-4 opacity-50"/>
                                                <p className="font-black uppercase tracking-widest text-[10px] md:text-xs">Select a location on the map</p>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </section>
                        )}

                        {/* Routes Tab */}
                        {activeTab === 'routes' && (
                            <section className="max-w-7xl mx-auto px-4 md:px-8 py-10 md:py-20">
                                {!selectedWalk ? (
                                    <div className="animate-in">
                                        <div className="mb-10 text-center">
                                            <h2 className="text-4xl md:text-5xl font-black uppercase tracking-tighter mb-4">Hiking Routes</h2>
                                            <div className="flex flex-wrap justify-center gap-2 mt-6">
                                                {['1-3', '4-6', '7+'].map(filter => (
                                                    <button 
                                                        key={filter}
                                                        onClick={() => setWalkFilter(filter)}
                                                        className={`px-6 py-3 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${walkFilter === filter ? 'bg-slate-900 text-white shadow-lg' : 'bg-slate-100 text-slate-400 hover:bg-slate-200'}`}
                                                    >
                                                        {filter} Miles
                                                    </button>
                                                ))}
                                            </div>
                                        </div>
                                        <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
                                            {WALKS.filter(w => w.category === walkFilter).map(walk => (
                                                <div key={walk.id} onClick={() => setSelectedWalk(walk)} className="bg-white border border-slate-100 p-8 rounded-[2rem] hover:shadow-xl transition-all cursor-pointer group">
                                                    <div className="flex justify-between items-center mb-6">
                                                        <span className={`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${walk.difficulty === 'Easy' ? 'bg-green-50 text-green-600' : walk.difficulty === 'Moderate' ? 'bg-yellow-50 text-yellow-600' : 'bg-red-50 text-red-600'}`}>{walk.difficulty}</span>
                                                        <span className="text-slate-400 text-xs font-bold">{walk.length}</span>
                                                    </div>
                                                    <h3 className="text-xl font-black mb-2 group-hover:text-sky-600 transition-colors">{walk.name}</h3>
                                                    <p className="text-slate-400 text-xs">{walk.desc}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ) : (
                                    <div className="animate-in grid lg:grid-cols-12 gap-8">
                                        <div className="lg:col-span-8 h-[300px] md:h-[500px] lg:h-[600px] rounded-[2rem] md:rounded-[3rem] overflow-hidden border border-slate-100 shadow-xl relative order-1 lg:order-2">
                                            <div ref={walkMapContainerRef} className="w-full h-full"></div>
                                        </div>
                                        <div className="lg:col-span-4 bg-white rounded-[2rem] md:rounded-[3rem] p-8 md:p-10 border border-slate-100 shadow-lg order-2 lg:order-1">
                                            <button onClick={() => setSelectedWalk(null)} className="flex items-center text-slate-400 hover:text-black font-black uppercase text-[10px] tracking-widest mb-8">
                                                <Icon name="arrowLeft" size={14} className="mr-2" /> Back to Routes
                                            </button>
                                            <span className="text-red-500 font-black uppercase text-[10px] tracking-widest mb-2 block">{selectedWalk.length} • {selectedWalk.difficulty}</span>
                                            <h2 className="text-3xl md:text-4xl font-black tracking-tighter mb-6">{selectedWalk.name}</h2>
                                            <div className="space-y-6">
                                                <div className="bg-slate-50 p-6 rounded-2xl">
                                                    <div className="grid grid-cols-2 gap-4">
                                                        <div>
                                                            <p className="text-[9px] font-black uppercase text-slate-400">Elevation</p>
                                                            <p className="font-bold">{selectedWalk.elevation}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-[9px] font-black uppercase text-slate-400">Parking</p>
                                                            <p className="font-bold">{selectedWalk.parking}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <p className="text-slate-600 text-sm md:text-base leading-relaxed">{selectedWalk.desc}</p>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </section>
                        )}

                        {/* Learn Tab */}
                        {activeTab === 'learn' && (
                            <section className="max-w-7xl mx-auto px-4 md:px-8 py-10 md:py-20">
                                <div className="mb-12 text-center md:text-left">
                                    <h2 className="text-4xl md:text-5xl font-black uppercase tracking-tighter">Photography Guides</h2>
                                    <p className="text-slate-400 mt-2">Essential field skills for the Northumberland coast and hills.</p>
                                </div>
                                <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                                    {GUIDES.map(guide => (
                                        <div key={guide.id} onClick={() => setSelectedTopic(guide)} className="bg-white border border-slate-100 p-8 md:p-10 rounded-[2rem] shadow-sm hover:shadow-xl transition-all cursor-pointer group">
                                            <span className="text-[10px] font-black uppercase text-sky-500 mb-4 block tracking-widest">{guide.cat} • {guide.time}</span>
                                            <h3 className="text-xl md:text-2xl font-black mb-4 group-hover:text-sky-600 transition-colors">{guide.title}</h3>
                                            <p className="text-slate-400 text-sm leading-relaxed line-clamp-3">{guide.impact}</p>
                                        </div>
                                    ))}
                                </div>
                            </section>
                        )}
                    </main>

                    {/* Topic Modal */}
                    {selectedTopic && (
                        <div className="fixed inset-0 z-[200] bg-white overflow-y-auto p-6 md:p-20 animate-in custom-scrollbar">
                            <div className="max-w-3xl mx-auto py-10">
                                <button onClick={() => setSelectedTopic(null)} className="mb-10 flex items-center space-x-2 text-slate-400 font-black uppercase text-[10px] tracking-widest hover:text-black">
                                    <Icon name="x" size={16} /> <span>Close Module</span>
                                </button>
                                <span className="text-sky-500 font-black uppercase text-xs tracking-widest mb-4 block">{selectedTopic.cat}</span>
                                <h2 className="text-4xl md:text-7xl font-black tracking-tighter mb-10 leading-none">{selectedTopic.title}</h2>
                                <p className="text-lg md:text-xl text-slate-700 leading-relaxed mb-10">{selectedTopic.impact}</p>
                                <div className="bg-slate-50 p-8 md:p-12 rounded-[2rem] md:rounded-[3rem] border border-slate-100">
                                    <p className="text-[10px] font-black uppercase tracking-widest text-slate-400 mb-4">Educational Summary</p>
                                    <p className="text-lg text-slate-800 leading-relaxed">Full technical breakdown and diagrams for this module are available in the field guide app companion.</p>
                                </div>
                            </div>
                        </div>
                    )}
                    
                    <footer className="bg-slate-50 border-t border-slate-100 py-10 md:py-16 text-center mt-auto">
                        <p className="text-[10px] font-black uppercase tracking-[0.3em] text-slate-400 mb-4">NorthernPixl © 2024</p>
                        <div className="flex justify-center space-x-6">
                            {['Home', 'Privacy', 'Contact'].map(item => (
                                <a key={item} href="#" className="text-xs font-bold text-slate-400 hover:text-black">{item}</a>
                            ))}
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
